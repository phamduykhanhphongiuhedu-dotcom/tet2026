<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 | The Infinite Fortune</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/Draggable.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@700&family=Montserrat:wght@100;300;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --gold: #fcc200;
            --red-silk: #9b0000;
            --glass: rgba(255, 255, 255, 0.08);
            --bg-accent: #111111;
        }

        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            overflow: hidden; 
            background: radial-gradient(circle at center, #1a1a1a 0%, #000 100%);
            font-family: 'Montserrat', sans-serif; cursor: none;
        }

        canvas { position: fixed; top: 0; left: 0; z-index: 1; }

        .cursor-ring {
            width: 40px; height: 40px; border: 1px solid var(--gold);
            border-radius: 50%; position: fixed; pointer-events: none;
            z-index: 9999; transition: transform 0.1s ease-out;
            display: flex; align-items: center; justify-content: center;
        }
        .cursor-point { width: 4px; height: 4px; background: white; border-radius: 50%; }

        .stage {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column; align-items: center;
            justify-content: center; z-index: 10;
        }

        #game-stage { display: none; }
        
        .que-container {
            width: 120px; height: 250px; background: var(--red-silk);
            border: 3px solid var(--gold); border-radius: 10px 10px 50px 50px;
            position: relative; cursor: grab; box-shadow: 0 0 70px rgba(155,0,0,0.6);
            transform-origin: bottom center;
        }

        .que-stick {
            width: 10px; height: 200px; background: #f3e5ab;
            position: absolute; top: -100px; left: 55px;
            border-top: 20px solid var(--red-silk); border-radius: 5px;
            transition: 0.3s;
        }

        #result-stage {
            display: none; 
            background: radial-gradient(circle, rgba(255,207,77,0.1) 0%, transparent 80%);
        }

        .fortune-card {
            background: var(--glass); 
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            padding: 50px; border-radius: 40px; 
            border: 1px solid rgba(255,255,255,0.15);
            text-align: center; max-width: 550px; 
            transform: scale(0.9);
            box-shadow: 0 40px 100px rgba(0,0,0,0.8);
        }

        h1.year-title {
            font-family: 'Cinzel Decorative', cursive; font-size: 12rem;
            margin: 0; background: linear-gradient(to bottom, #fff, var(--gold));
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            opacity: 0.15; position: absolute; pointer-events: none;
            filter: blur(2px);
        }

        .btn-action {
            padding: 16px 45px; background: none; border: 1px solid var(--gold);
            color: var(--gold); text-transform: uppercase; letter-spacing: 5px;
            cursor: pointer; transition: 0.4s; overflow: hidden; position: relative;
            font-weight: 600; margin-top: 30px;
        }
        .btn-action:hover { background: var(--gold); color: black; box-shadow: 0 0 40px rgba(252,194,0,0.4); }

        #hint { position: absolute; bottom: 12%; color: var(--gold); letter-spacing: 3px; font-weight: 300; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { opacity: 0.3; } 50% { opacity: 1; } 100% { opacity: 0.3; } }
    </style>
</head>
<body>

<div class="cursor-ring" id="ring"><div class="cursor-point"></div></div>
<canvas id="main-canvas"></canvas>

<div class="stage" id="intro-stage">
    <h1 class="year-title">2026</h1>
    <div style="text-align: center; z-index: 11; max-width: 800px;">
        <p style="letter-spacing: 12px; font-weight: 100; margin-bottom: 20px;">A NEW BEGINNING</p>
        <h2 style="font-family: 'Cinzel Decorative'; font-size: 2.2rem; color: var(--gold); line-height: 1.4; padding: 0 20px;">
            Step into 2026 with a new experienceâ€”Khanh Phong brings luck your way.
        </h2>
        <button class="btn-action" onclick="toGame()">Enter Experience</button>
    </div>
</div>

<div class="stage" id="game-stage">
    <div class="que-container" id="que-box">
        <div class="que-stick" style="transform: rotate(-12deg) translateX(-20px);"></div>
        <div class="que-stick" style="transform: rotate(8deg) translateX(15px);"></div>
        <div class="que-stick" id="special-stick"></div>
    </div>
    <p id="hint">HOLD AND SHAKE TO RECEIVE YOUR FORTUNE</p>
</div>

<div class="stage" id="result-stage">
    <div class="fortune-card" id="card">
        <h3 id="fortune-head" style="color: var(--gold); font-family: 'Cinzel Decorative'; font-size: 1.8rem; letter-spacing: 3px; margin-bottom: 25px;"></h3>
        <p id="fortune-body" style="line-height: 1.8; font-weight: 300; font-size: 1.1rem; color: #e0e0e0;"></p>
        <button class="btn-action" onclick="location.reload()">Try Again</button>
    </div>
</div>

<script>
/**
 * PROFESSIONAL PARTICLE SYSTEM
 */
const canvas = document.getElementById('main-canvas');
const ctx = canvas.getContext('2d');
let particles = [];
let sparks = [];

class Particle {
    constructor() {
        this.reset();
    }
    reset() {
        this.x = Math.random() * canvas.width;
        this.y = Math.random() * canvas.height;
        this.size = Math.random() * 2 + 0.5;
        this.color = `rgba(252, 194, 0, ${Math.random() * 0.6})`;
        this.velocity = Math.random() * 0.3 + 0.1;
        this.angle = Math.random() * Math.PI * 2;
    }
    draw() {
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
        ctx.fillStyle = this.color;
        ctx.fill();
    }
    update(mouse) {
        this.x += Math.cos(this.angle) * this.velocity;
        this.y += Math.sin(this.angle) * this.velocity;
        
        if(this.x < 0 || this.x > canvas.width || this.y < 0 || this.y > canvas.height) this.reset();

        let dx = mouse.x - this.x;
        let dy = mouse.y - this.y;
        let dist = Math.sqrt(dx*dx + dy*dy);
        if(dist < 120) {
            this.x -= dx/25;
            this.y -= dy/25;
        }
    }
}

class Spark {
    constructor(x, y, color) {
        this.x = x; this.y = y;
        this.color = color;
        this.size = Math.random() * 3 + 1;
        this.vx = (Math.random() - 0.5) * 12;
        this.vy = (Math.random() - 0.5) * 12;
        this.gravity = 0.12;
        this.alpha = 1;
    }
    draw() {
        ctx.save();
        ctx.globalAlpha = this.alpha;
        ctx.shadowBlur = 10;
        ctx.shadowColor = this.color;
        ctx.fillStyle = this.color;
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size, 0, Math.PI*2);
        ctx.fill();
        ctx.restore();
    }
    update() {
        this.vx *= 0.98; this.vy *= 0.98;
        this.vy += this.gravity;
        this.x += this.vx; this.y += this.vy;
        this.alpha -= 0.015;
    }
}

let mouse = { x: -500, y: -500 };
function init() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    particles = [];
    for(let i=0; i<200; i++) particles.push(new Particle());
}

function loop() {
    ctx.fillStyle = 'rgba(0,0,0,0.2)';
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    
    particles.forEach(p => { p.update(mouse); p.draw(); });
    sparks.forEach((s, i) => {
        s.update(); s.draw();
        if(s.alpha <= 0) sparks.splice(i, 1);
    });
    
    requestAnimationFrame(loop);
}
init(); loop();

window.addEventListener('mousemove', e => {
    mouse.x = e.clientX; mouse.y = e.clientY;
    gsap.to("#ring", { x: e.clientX - 20, y: e.clientY - 20, duration: 0.1 });
});

/**
 * GAME LOGIC
 */
function toGame() {
    gsap.to("#intro-stage", { opacity: 0, y: -20, duration: 0.8, onComplete: () => {
        document.getElementById('intro-stage').style.display = 'none';
        document.getElementById('game-stage').style.display = 'flex';
        initGameLogic();
    }});
}

function initGameLogic() {
    let shakeCount = 0;
    const box = document.getElementById('que-box');
    
    Draggable.create(box, {
        type: "x,y",
        onDrag: function() {
            shakeCount++;
            gsap.to(".que-stick", { y: -Math.random()*25, rotation: (Math.random()-0.5)*30 });
            if(shakeCount > 80) {
                this.disable();
                finishGame();
            }
        },
        onDragEnd: function() {
            gsap.to(this.target, { x: 0, y: 0, duration: 0.6, ease: "elastic.out(1, 0.3)" });
        }
    });
}

function finishGame() {
    const stick = document.getElementById('special-stick');
    gsap.to(stick, { y: -180, duration: 0.6, ease: "power2.out", onComplete: () => {
        gsap.to("#game-stage", { opacity: 0, delay: 0.4, onComplete: showResult });
    }});
}

const fortuneData = [
    {h: "SUPREME LUCK", b: "In 2026, your path shines like stars in the sky. Great career advancement and fulfilling relationships await. Pursue your dreams with absolute confidence!"},
    {h: "PROSPERITY", b: "A year of harmony and abundance. Your family and friends will be your greatest support. 2026 will be filled with laughter and successful ventures."},
    {h: "WISDOM & WEALTH", b: "Your knowledge will expand and wealth will flow naturally. The Year of the Horse 2026 brings you endless creative energy and breakthroughs."}
];

function showResult() {
    document.getElementById('game-stage').style.display = 'none';
    const res = document.getElementById('result-stage');
    res.style.display = 'flex';
    
    const data = fortuneData[Math.floor(Math.random()*fortuneData.length)];
    document.getElementById('fortune-head').innerText = data.h;
    document.getElementById('fortune-body').innerText = data.b;
    
    gsap.from("#card", { scale: 0.5, opacity: 0, rotationX: 45, duration: 1.5, ease: "expo.out" });
    
    setInterval(() => {
        createFirework(Math.random()*canvas.width, Math.random()*canvas.height);
    }, 1000);
}

function createFirework(x, y) {
    const colors = ['#fcc200', '#ff3e3e', '#ffffff', '#00e5ff'];
    const color = colors[Math.floor(Math.random()*colors.length)];
    for(let i=0; i<50; i++) sparks.push(new Spark(x, y, color));
}

window.addEventListener('click', e => {
    if(document.getElementById('result-stage').style.display === 'flex') {
        createFirework(e.clientX, e.clientY);
    }
});

window.addEventListener('resize', init);
</script>
</body>
</html>
